name: Set environment variables

inputs:
  build-type:
    description: Release or Debug
    required: true
    type: string

runs:
  using: composite
  steps:
    - name: Set environment variables
      shell: bash
      run: |
        buildType=${{ inputs.build-type }}
        printf "CAPITALISED_BUILD_TYPE=%s\n" "${buildType}" >> $GITHUB_ENV
        printf "LOWERCASE_BUILD_TYPE=%s\n" "${buildType,,}" >> $GITHUB_ENV
        
        versionPropertiesPath="${{ github.workspace }}/version.properties"
        versionString="$(cat "${versionPropertiesPath}")"
        versionTag="version="
        version="$(printf "%s" "${versionString}" | sed -e "s/^"${versionTag}"//")"
        artifactName="${version}"-"$(date +%Y%m%d_%H%M%S)"
        printf "ARTIFACT_OCI_REGISTRY_NAME=%s\n" "${artifactName}" >> $GITHUB_ENV
